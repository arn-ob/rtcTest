{"version":3,"sources":["C:/Users/Arnob/Downloads/webrtc-angularfire2-master/webrtc-angularfire2-master/angular/src async","C:/Users/Arnob/Downloads/webrtc-angularfire2-master/webrtc-angularfire2-master/angular/src/app/app.component.css","C:/Users/Arnob/Downloads/webrtc-angularfire2-master/webrtc-angularfire2-master/angular/src/app/app.component.html","C:/Users/Arnob/Downloads/webrtc-angularfire2-master/webrtc-angularfire2-master/angular/src/app/app.component.ts","C:/Users/Arnob/Downloads/webrtc-angularfire2-master/webrtc-angularfire2-master/angular/src/app/app.module.ts","C:/Users/Arnob/Downloads/webrtc-angularfire2-master/webrtc-angularfire2-master/angular/src/environments/environment.ts","C:/Users/Arnob/Downloads/webrtc-angularfire2-master/webrtc-angularfire2-master/angular/src/main.ts"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["function webpackEmptyContext(req) {\n\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = \"../../../../../src async recursive\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Users/Arnob/Downloads/webrtc-angularfire2-master/webrtc-angularfire2-master/angular/src async\n// module id = ../../../../../src async recursive\n// module chunks = 2","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".video-container {\\n    margin: 20px;\\n}\\n\\n.button-container {\\n    margin: 20px;\\n}\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Users/Arnob/Downloads/webrtc-angularfire2-master/webrtc-angularfire2-master/angular/src/app/app.component.css\n// module id = ../../../../../src/app/app.component.css\n// module chunks = 2","module.exports = \"<div class=\\\"row video-container\\\">\\n\\n  <div class=\\\"col-lg-12\\\">\\n\\n    <video id=\\\"me\\\" controls autoplay #me>\\n    </video>\\n  </div>\\n\\n  <div class=\\\"col-lg-12\\\">\\n    <video id=\\\"device\\\" controls autoplay #remote>\\n\\n    </video>\\n  </div>\\n  \\n  <div class=\\\"col-lg-12 button-container\\\">\\n      <button (click)=\\\"showRemote()\\\" type=\\\"button\\\" class=\\\"btn btn-primary btn-lg\\\">\\n            <span class=\\\"glyphicon glyphicon-facetime-video\\\" aria-hidden=\\\"true\\\"></span> Connect\\n        </button>\\n  </div>\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Users/Arnob/Downloads/webrtc-angularfire2-master/webrtc-angularfire2-master/angular/src/app/app.component.html\n// module id = ../../../../../src/app/app.component.html\n// module chunks = 2","import { Component, OnInit, ViewChild, Injectable } from '@angular/core';\nimport { Observable } from 'rxjs/Observable';\nimport { RouterModule, Routes, ActivatedRoute, Router } from '@angular/router';\n\nimport {\n  AngularFireDatabase,\n  FirebaseListObservable\n} from 'angularfire2/database';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport * as firebase from 'firebase/app';\n\nconst SERVERS: any = {\n  iceServers: [\n    { urls: 'stun:stun.services.mozilla.com' },\n    { urls: 'stun:stun.l.google.com:19302' }\n  ]\n};\n\nconst DEFAULT_CONSTRAINTS = {\n  optional: []\n};\n\ndeclare let RTCPeerConnection: any;\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit {\n  pc: any;\n  channel: FirebaseListObservable<any[]>;\n  database: firebase.database.Reference;\n  user: firebase.User;\n  senderId: string;\n\n  @ViewChild('me') me: any;\n  @ViewChild('remote') remote: any;\n\n  constructor(\n    public afDb: AngularFireDatabase,\n    public afAuth: AngularFireAuth\n  ) {}\n\n  ngOnInit() {\n    this.setupWebRtc();\n  }\n\n  setupWebRtc() {\n    this.senderId = this.guid();\n    const channelName = '/webrtc';\n    this.channel = this.afDb.list(channelName);\n    this.database = this.afDb.database.ref(channelName);\n\n    this.database.on('child_added', this.readMessage.bind(this));\n    this.pc = new RTCPeerConnection(SERVERS, DEFAULT_CONSTRAINTS);\n    this.pc.onicecandidate = event =>\n      event.candidate\n        ? this.sendMessage(\n            this.senderId,\n            JSON.stringify({ ice: event.candidate })\n          )\n        : console.log('Sent All Ice');\n\n    this.pc.ontrack = event =>\n      (this.remote.nativeElement.srcObject = event.streams[0]); // use ontrack\n\n    this.showMe();\n  }\n\n  sendMessage(senderId, data) {\n    const msg = this.channel.push({\n      sender: senderId,\n      message: data\n    });\n    msg.remove();\n  }\n\n  readMessage(data) {\n    // tslint:disable-next-line:curly\n    if (!data) return;\n    const msg = JSON.parse(data.val().message);\n    const sender = data.val().sender;\n    if (sender !== this.senderId) {\n      // tslint:disable-next-line:curly\n      if (msg.ice !== undefined)\n        this.pc.addIceCandidate(new RTCIceCandidate(msg.ice));\n      // tslint:disable-next-line:curly\n      else if (msg.sdp.type === 'offer')\n        this.pc\n          .setRemoteDescription(new RTCSessionDescription(msg.sdp))\n          .then(() => this.pc.createAnswer())\n          .then(answer => this.pc.setLocalDescription(answer))\n          .then(() =>\n            this.sendMessage(\n              this.senderId,\n              JSON.stringify({ sdp: this.pc.localDescription })\n            )\n          );\n      // tslint:disable-next-line:curly\n      else if (msg.sdp.type === 'answer')\n        this.pc.setRemoteDescription(new RTCSessionDescription(msg.sdp));\n    }\n  }\n\n  showMe() {\n    navigator.mediaDevices\n      .getUserMedia({ audio: true, video: true })\n      .then(stream => (this.me.nativeElement.srcObject = stream))\n      .then(stream => this.pc.addStream(stream));\n  }\n\n  showRemote() {\n    this.pc\n      .createOffer()\n      .then(offer => this.pc.setLocalDescription(offer))\n      .then(() =>\n        this.sendMessage(\n          this.senderId,\n          JSON.stringify({ sdp: this.pc.localDescription })\n        )\n      );\n  }\n\n  guid() {\n    return (\n      this.s4() +\n      this.s4() +\n      '-' +\n      this.s4() +\n      '-' +\n      this.s4() +\n      '-' +\n      this.s4() +\n      '-' +\n      this.s4() +\n      this.s4() +\n      this.s4()\n    );\n  }\n\n  s4() {\n    return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/Arnob/Downloads/webrtc-angularfire2-master/webrtc-angularfire2-master/angular/src/app/app.component.ts","import { BrowserModule } from \"@angular/platform-browser\";\nimport { NgModule } from \"@angular/core\";\n\nimport { AppComponent } from \"./app.component\";\n\nimport { AngularFireModule } from \"angularfire2\";\nimport { AngularFireDatabaseModule } from \"angularfire2/database\";\nimport { AngularFireAuthModule } from \"angularfire2/auth\";\n\nimport { environment } from \"../environments/environment\";\n\n@NgModule({\n  declarations: [AppComponent],\n  imports: [\n    BrowserModule,\n    AngularFireModule.initializeApp(environment.firebase, environment.appName),\n    AngularFireDatabaseModule,\n    AngularFireAuthModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {}\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/Arnob/Downloads/webrtc-angularfire2-master/webrtc-angularfire2-master/angular/src/app/app.module.ts","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false,\n  appName: \"webrtc-angularfire2\",\n  firebase: {\n    apiKey: \"AIzaSyAcMOgG58ZIfB0Mr62tpUS6YUB8wpnvIJg\",\n    authDomain: \"webrtc-e1eeb.firebaseapp.com\",\n    databaseURL: \"https://webrtc-e1eeb.firebaseio.com\",\n    projectId: \"webrtc-e1eeb\",\n    storageBucket: \"\",\n    messagingSenderId: \"276952673200\"\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/Arnob/Downloads/webrtc-angularfire2-master/webrtc-angularfire2-master/angular/src/environments/environment.ts","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/Arnob/Downloads/webrtc-angularfire2-master/webrtc-angularfire2-master/angular/src/main.ts"],"sourceRoot":"webpack:///"}